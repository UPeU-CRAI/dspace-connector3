<resource xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          oid="196b0e1d-869f-491f-aad5-e7e95fc637a5" version="1">
    <!-- Nombre del recurso -->
    <name>DSpace</name>

    <!-- Referencia al conector -->
    <connectorRef oid="1527d183-d1af-42f5-b97c-f024299eadd4" version="1"/>

    <!-- Configuración del recurso -->
    <configuration>
        <baseUrl>http://192.168.15.231:8080</baseUrl>
        <username>test@test.edu</username>
        <password>
            <encryptedData>
                <!-- Aquí puedes colocar la contraseña encriptada generada por MidPoint -->
                <cipherData>
                    <cipherValue>ENC(EncryptedPasswordHere)</cipherValue>
                </cipherData>
            </encryptedData>
        </password>
    </configuration>

    <!-- Configuración de esquema -->
    <schema>
        <generationConstraints>
            <!-- Define el ObjectClass a generar -->
            <generateObjectClass>eperson</generateObjectClass>
        </generationConstraints>
    </schema>

    <!-- Configuración de sincronización -->
    <synchronization>
        <objectSynchronization>
            <focusType>UserType</focusType>
            <objectTemplateRef oid="00000000-0000-0000-0000-000000000001" />
            <correlation>
                <expression>
                    <value>eperson.email</value>
                </expression>
            </correlation>
            <confirmation>
                <expression>
                    <script>return focus.email == resourceObject.email;</script>
                </expression>
            </confirmation>
            <reaction>
                <situation>ADD</situation>
                <action>
                    <focusModification>
                        <item>
                            <path>name</path>
                            <value>New User</value>
                        </item>
                    </focusModification>
                </action>
            </reaction>
        </objectSynchronization>
    </synchronization>

    <!-- Configuración de capacidades -->
    <capabilities>
        <native>
            <create>true</create>
            <update>true</update>
            <delete>true</delete>
        </native>
        <scriptExecution>
            <enabled>true</enabled>
        </scriptExecution>
    </capabilities>
</resource>
